<apex:page standardController="account" extensions="ashokcontroller" sidebar="false">
<style>
body {
    background-color: lightblue;
}


</style>

<apex:PageBlock id="summaryAcc">
     <apex:pageBlockSection columns="1">
         <apex:pageBlockTable var="acc" value="{!Account}" >
         <apex:column headerValue="Corporate Account Name">
         <apex:outputLink value="/{!acc.Id}">{!acc.Name}</apex:outputLink>
         </apex:column>
             <apex:column value="{!siz}" headerValue="Site Count"/>
             <apex:column value="{!ProjSiteList.size}" headerValue="Projects Count"/>
             <apex:column headerValue="Most Recent Order Date">
             <apex:outputText value="{0,date,MM'/'dd'/'yyyy}"><apex:param value="{!ordFnzDtMax}"/></apex:outputText>
             </apex:column>
             <apex:column value="{!prjStgWon}" headerValue="Projects Won (Order Paid)"/> 
             <apex:column value="{!prjStgPrg}" headerValue="Projects (Order In Progress)"/>
             <apex:column value="{!prjStgQtd}" headerValue="Projects (Quote in Progress)"/>
             <apex:column value="{!prjStglost}" headerValue="Project Lost"/>
             <apex:column value="{!DuplPrj }" headerValue="Duplicate Projects"/>
           <!--  <apex:column value="{!CAProjOppList.size}" headerValue="QuoteLess Opportunities"/> -->
            <!-- <apex:column value="{!siz}" headerValue="Project Count"/> -->
           <!--  <apex:column value="{!prjWon}" headerValue="Projects Won"/> -->
             <apex:column headerValue="Closure Rate">
                 <apex:outputText value="{0,Number,0.00}%"><apex:param value="{!(100*prjWon)/IF(ProjSiteList.size == 0, 1, ProjSiteList.size)}" /></apex:outputText> 
            </apex:column>
         <!--   <apex:column headerValue="Amount Quoted (Total)">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!totalAmount}" /></apex:outputText> 
            </apex:column> -->
            <apex:column headerValue="Amount (Projects Won)">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!prjStgWonAmt}" /></apex:outputText> 
            </apex:column>
            <apex:column headerValue="Amount (Order In Progress)">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!prjStgPrgAmt}" /></apex:outputText> 
            </apex:column>
            <apex:column headerValue="Amount (Quote In Progress)">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!prjStgQtdAmt}" /></apex:outputText> 
            </apex:column>
            <apex:column headerValue="Amount (Lost)">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!prjStglostAmt}" /></apex:outputText> 
            </apex:column>
           <!-- <apex:column headerValue="Amount Won">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!amountWon}" /></apex:outputText> 
            </apex:column> -->
           <apex:column headerValue="Total Amount">
                 <apex:outputText value="{0, Number, Currency}"><apex:param value="{!totalAmount}" /></apex:outputText> 
            </apex:column>
         </apex:pageBlockTable>
     </apex:pageBlockSection>
    </apex:PageBlock>
      
      
      <apex:pageBlock >
             <apex:pageBlockSection title="Quoteless Opportunities : {!CAProjOppList.size}" columns="2">
   <apex:pageblockTable value="{!CAProjOppList }" var="opp">
   <apex:column headervalue="Project Name" value="{!opp.Project_Name__r.Name}"/>    
   <apex:column headervalue="Opportunity Name" value="{!opp.name}"/>
   <apex:column headervalue="Project Created Date ">
   <apex:outputText value="{0,date,MM/dd/yy}"> <apex:param value="{!opp.Project_Name__r.CreatedDate}" /> </apex:outputText>    
       </apex:column>
   <apex:column headervalue="Opportunity Stage" value="{!opp.StageName}"/>
       
   <apex:column headervalue="Architect" value="{!opp.Project_Name__r.Architect_Account__c}"/>
   </apex:pageblockTable>
                 </apex:pageBlockSection>
   </apex:pageBlock>
   
   <head>
        <apex:includescript value="//code.jquery.com/jquery-1.11.1.min.js" / >
        <apex:includescript value="//cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js" />
        <apex:stylesheet value="//cdn.datatables.net/1.10.4/css/jquery.dataTables.css" />
        <script>
            j$ = jQuery.noConflict();
            j$(document).ready( function () {
                var contactTable = j$('[id$="contacttable"]').DataTable({
                    
                });
                var contactTable1 = j$('[id$="contacttable1"]').DataTable({
                    
                });
            });
        </script>
    </head>
    <body>
        <table id="contacttable" class="display">
            <thead>
                <tr>
                    <th>Corporate Account Site Location (End Customer)</th>
                    <th>Project Name</th>
                    <th>Project Status</th>
                    <th> Amount</th>
                    <th>     Project Created Date     </th>
                    <th>    Order Finalized Date     </th>
                    <th>Order Created Date   </th>
                    <th>  Application Industry</th>
                    <th>   Architect      </th>
                    <th> Installed at Account</th>
                    <th>Ordering Account </th>
                    <th>  Contact Role Name       </th>
                    <th> Project City        </th>
                    <th>  Project State </th>
                    <th>  Project ZipCode </th>                    
                    </tr>
            </thead>
            <tbody>
                <apex:repeat value="{!ProjectList}" var="pr">
                    <tr>
                        <td>{!pr.accountName.Name}</td>
                        <td> {!pr.projectName.name}</td>  
                        <td>  {!pr.status }</td> 
                        <td>  {!pr.amount }</td>
                        <td>  {!pr.crtdt}</td>
                        <td>  {!pr.ordFnzDt }</td>
                        <td>  {!pr.ordCrtDt }</td>
                        <td>  {!pr.applicationIndustry}</td>
                        <td>  {!pr.architect.Name }</td>
                        <td>  {!pr.purchaser.Name }</td>
                        <td>  {!pr.orderingAccount.Name }</td>
                        <td>  {!pr.status}</td>
                        <td>  {!pr.projectCity }</td>
                        <td>  {!pr.projectState}</td>
                        <td>  {!pr.projectZipCode}</td>                       
                        
                    </tr>
                </apex:repeat>
            </tbody>
            
            
        </table>
    </body>
    
   <body>
        <table id="contacttable1" class="display">
            <thead>
                <tr>
                    <th>Corporate Account Site Location (End Customer)</th>
                    <th>Project Name</th>
                    <th>Project Status</th>
                    <th> Amount</th>
                    <th>     Project Created Date     </th>
                    <th>    Order Finalized Date     </th>
                    <th>Order Created Date   </th>
                    <th>  Application Industry</th>
                    <th>   Architect      </th>
                    <th> Installed at Account</th>
                    <th>Ordering Account </th>
                    <th>  Contact Role Name       </th>
                    <th> Project City        </th>
                    <th>  Project State </th>
                    <th>  Project ZipCode </th>                    
                    </tr>
            </thead>
            <tbody>
                <apex:repeat value="{!Opportunities}" var="ac">
                    <tr>
                        <td>{!ac.name}</td>
                                             
                        
                    </tr>
                </apex:repeat>
            </tbody>
            
            
        </table>
    </body>
</apex:page>